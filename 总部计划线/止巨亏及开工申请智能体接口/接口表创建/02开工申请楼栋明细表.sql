-- 集团开工申请楼栋明细表智能体数据提取表结构
-- 用于存储各公司、项目、楼栋的开工、销售、成本、利润等明细数据，便于智能体分析与决策

CREATE TABLE s_集团开工申请楼栋明细表智能体数据提取
(
    公司名称                  VARCHAR(200),         -- 公司名称
    公司GUID                  UNIQUEIDENTIFIER,     -- 公司唯一标识
    项目名称                  VARCHAR(200),         -- 项目名称
    项目GUID                  UNIQUEIDENTIFIER,     -- 项目唯一标识
    业态                      VARCHAR(200),         -- 业态类型（如住宅、商业等）
    状态                      VARCHAR(200),         -- 楼栋状态（如已售罄、在售等）
    产品楼栋                  VARCHAR(200),         -- 产品楼栋名称
    产品楼栋GUID              UNIQUEIDENTIFIER,     -- 产品楼栋唯一标识
    赛道标签                  VARCHAR(200),         -- 赛道标签（如高端、刚需等）
    实际售罄时间              DATETIME,             -- 实际售罄时间
    历史供货周期              DECIMAL(38,10),       -- 历史供货周期（单位：月/天，具体业务定义）
    总可售面积                DECIMAL(38,10),       -- 楼栋总可售面积（平方米）
    总货值                    DECIMAL(38,10),       -- 楼栋总货值（万元/元，具体业务定义）
    已开工未售部分的货值_含税  DECIMAL(38,10),       -- 已开工未售部分的货值（含税）
    已开工未售部分的货值_不含税 DECIMAL(38,10),      -- 已开工未售部分的货值（不含税）
    已开工未售部分的面积      DECIMAL(38,10),       -- 已开工未售部分的面积
    已开工未售部分的销售均价  DECIMAL(38,10),       -- 已开工未售部分的销售均价
    已售部分的含税货值        DECIMAL(38,10),       -- 已售部分的货值（含税）
    已售部分的销售均价        DECIMAL(38,10),       -- 已售部分的销售均价
    已售面积                  DECIMAL(38,10),       -- 已售面积
    已推面积                  DECIMAL(38,10),       -- 已推面积
    已售部分的推货去化率      DECIMAL(18,6),        -- 已售部分的推货去化率（已售面积/已推面积）
    累计不含税签约金额        DECIMAL(38,10),       -- 累计不含税签约金额
    业态所有支出的单方_含税费 DECIMAL(38,10),       -- 业态所有支出的单方（含税费）
    不含税成本                DECIMAL(38,10),       -- 不含税成本
    税后净利润                DECIMAL(38,10),       -- 税后净利润
    销净率                    DECIMAL(18,6),        -- 销净率（已售面积/总可售面积）
    清洗日期                  DATETIME              -- 数据清洗日期
)

-- 创建主键索引（产品楼栋GUID作为主键，因为它是楼栋的唯一标识）
CREATE INDEX IX_公司项目楼栋 ON s_集团开工申请楼栋明细表智能体数据提取 (公司GUID, 项目GUID, 产品楼栋GUID)
CREATE INDEX IX_清洗日期 ON s_集团开工申请楼栋明细表智能体数据提取 (清洗日期)